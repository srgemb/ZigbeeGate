
//*************************************************************************************************
//
// Управления эмулятором терминала VT100 в терминальной программе
//
//*************************************************************************************************

#include <stdio.h>

#include "vt100.h"
#include "uart.h"

static char buff[20];

//*************************************************************************************************
// Инициализация терминала режима терминала VT100
//*************************************************************************************************
void vt100Init( void ) {

    UartSendStr( "\x1B\x63" );
 }

//*************************************************************************************************
// Очистка экрана
//*************************************************************************************************
void vt100ClearScreen( void ) {

    UartSendStr( "\x1B[2J" );
 }

//*************************************************************************************************
// Управление атрибутами отображения
// uint8_t attr - атрибут
//*************************************************************************************************
void vt100SetAttr( uint8_t attr ) {

    sprintf( buff, "\x1B[%dm", attr );
    UartSendStr( buff );
 }

//*************************************************************************************************
// Управление курсором "вкл"/"выкл"
// uint8_t visible = 0/1 - выкл/вкл
//*************************************************************************************************
void vt100SetCursorMode( uint8_t visible ) {

    if ( visible )
        UartSendStr( "\x1B[?25h"  );
    else UartSendStr( "\x1B[?25l" );
 }

//*************************************************************************************************
// Управление позиционированием курсора
// uint8_t line - номер строка
// uint8_t col  - позиция в строке
//*************************************************************************************************
void vt100SetCursorPos( uint8_t line, uint8_t col ) {

    sprintf( buff, "\x1B[%d;%dH", line, col );
    UartSendStr( buff );
 }

//*************************************************************************************************
// Позиционирование курсора вниз
//*************************************************************************************************
void vt100CursorDn( void ) {

    sprintf( buff, "\x1B[1B" );
    UartSendStr( buff );
 }
